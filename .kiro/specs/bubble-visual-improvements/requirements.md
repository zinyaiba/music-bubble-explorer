# Requirements Document

## Introduction

シャボン玉ビューアーの視覚的改善により、ユーザーがシャボン玉を見ただけで楽曲・作詞・作曲・編曲・タグの種類を判別でき、重複のない一意なシャボン玉表示を実現し、開発用デバッグ情報を商用版から除去するシステムです。

## Requirements

### Requirement 1

**User Story:** ユーザーとして、シャボン玉を見ただけで楽曲・作詞・作曲・編曲・タグの種類を判別したいので、視覚的に明確な区別ができる

#### Acceptance Criteria

1. WHEN シャボン玉が表示される THEN システムは楽曲・作詞・作曲・編曲・タグごとに異なる視覚的スタイルを適用する
2. WHEN 楽曲のシャボン玉が表示される THEN システムは楽曲専用の色・形状・アイコンを使用する
3. WHEN 作詞家のシャボン玉が表示される THEN システムは作詞家専用の色・形状・アイコンを使用する
4. WHEN 作曲家のシャボン玉が表示される THEN システムは作曲家専用の色・形状・アイコンを使用する
5. WHEN 編曲家のシャボン玉が表示される THEN システムは編曲家専用の色・形状・アイコンを使用する
6. WHEN タグのシャボン玉が表示される THEN システムは#プレフィックス付きでタグ専用の色・形状・アイコンを使用する

### Requirement 2

**User Story:** ユーザーとして、作詞・作曲に同じ人物がいても重複して見えないようにしたいので、一人の人物が複数の役割を持つ場合の表示を統合できる

#### Acceptance Criteria

1. WHEN 同一人物が複数の役割（作詞・作曲・編曲）を持つ THEN システムは一つのシャボン玉に統合して表示する
2. WHEN 統合されたシャボン玉が表示される THEN システムは複数の役割を示す複合的な視覚スタイルを適用する
3. WHEN 統合されたシャボン玉がクリックされる THEN システムはその人物の全ての役割と関連楽曲を表示する
4. WHEN 統合されたシャボン玉のサイズが決定される THEN システムは全ての役割での関連楽曲数を合計してサイズを計算する

### Requirement 3

**User Story:** ユーザーとして、飛んでいるシャボン玉に重複がないようにしたいので、同じ内容のシャボン玉が複数表示されることを防ぎたい

#### Acceptance Criteria

1. WHEN シャボン玉が生成される THEN システムは既に表示中のシャボン玉と重複しないようにチェックする
2. WHEN 新しいシャボン玉を選択する THEN システムは表示されていない楽曲・人物・タグから選択する
3. WHEN シャボン玉が消失する THEN システムはその内容を再度選択可能なプールに戻す
4. WHEN 全てのコンテンツが表示中の場合 THEN システムは新しいシャボン玉の生成を一時停止する

### Requirement 4

**User Story:** 開発者として、商用版でデバッグ情報を表示したくないので、FPSやResetStatusなどの開発用UI要素を本番環境から除去したい

#### Acceptance Criteria

1. WHEN 本番環境でアプリが実行される THEN システムはFPS表示を非表示にする
2. WHEN 本番環境でアプリが実行される THEN システムはResetStatusボタンを非表示にする
3. WHEN 本番環境でアプリが実行される THEN システムは開発用のデバッグコンソール出力を無効化する
4. WHEN 開発環境でアプリが実行される THEN システムは開発用UI要素とデバッグ情報を表示する
5. WHEN 環境設定が変更される THEN システムは適切な表示モードに自動切り替えする

### Requirement 5

**User Story:** ユーザーとして、シャボン玉の視覚的区別を直感的に理解したいので、各タイプの意味が分かりやすいアイコンや形状を使用したい

#### Acceptance Criteria

1. WHEN 楽曲のシャボン玉が表示される THEN システムは音符アイコンまたは円形を使用する
2. WHEN 作詞家のシャボン玉が表示される THEN システムはペンアイコンまたは特定の形状を使用する
3. WHEN 作曲家のシャボン玉が表示される THEN システムは楽譜アイコンまたは特定の形状を使用する
4. WHEN 編曲家のシャボン玉が表示される THEN システムはミキサーアイコンまたは特定の形状を使用する
5. WHEN タグのシャボン玉が表示される THEN システムはハッシュタグアイコンまたは六角形を使用する
6. WHEN 複数役割の人物のシャボン玉が表示される THEN システムは複合アイコンまたは特殊な形状を使用する