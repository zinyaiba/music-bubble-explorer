/* EnhancedBubbleBackground.css - ガラスモーフィズム背景のスタイル定義 */

.enhanced-bubble-background {
  /* GPU加速の最適化 */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  will-change: transform;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  -webkit-perspective: 1000px;
  perspective: 1000px;

  /* レイヤー管理 */
  isolation: isolate;
  
  /* ガラスモーフィズム効果のベース */
  backdrop-filter: blur(1px);
  -webkit-backdrop-filter: blur(1px);
}

.enhanced-bubble-background .gradient-layer {
  /* グラデーション層の最適化 */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  
  /* ガラスモーフィズム効果 */
  backdrop-filter: blur(0.5px);
  -webkit-backdrop-filter: blur(0.5px);
}

.enhanced-bubble-background .pattern-layer {
  /* パターン層のブレンドモード（ガラスモーフィズム対応） */
  mix-blend-mode: soft-light;
  opacity: 0.3;

  /* アニメーション効果（軽微） */
  animation: glassmorphism-float 25s ease-in-out infinite;
}

.enhanced-bubble-background canvas {
  /* Canvas層の最適化 */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  image-rendering: optimizeSpeed;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: optimize-contrast;
}

/* 軽微なフロートアニメーション（ガラスモーフィズム対応） */
@keyframes glassmorphism-float {
  0%,
  100% {
    transform: translateY(0px) translateX(0px) scale(1);
    opacity: 0.3;
  }
  25% {
    transform: translateY(-1px) translateX(0.5px) scale(1.01);
    opacity: 0.35;
  }
  50% {
    transform: translateY(0px) translateX(-0.5px) scale(1);
    opacity: 0.3;
  }
  75% {
    transform: translateY(1px) translateX(0px) scale(0.99);
    opacity: 0.25;
  }
}

/* パフォーマンスモード時のスタイル */
.enhanced-bubble-background.performance-mode {
  will-change: auto;
}

.enhanced-bubble-background.performance-mode .pattern-layer {
  display: none;
}

.enhanced-bubble-background.performance-mode canvas {
  display: none;
}

/* テーマ別のスタイル調整（ガラスモーフィズム対応） */
.enhanced-bubble-background.theme-chestnut {
  /* ガラスモーフィズムテーマ特有のスタイル */
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
}

.enhanced-bubble-background.theme-default {
  /* デフォルトガラスモーフィズムテーマのスタイル */
  backdrop-filter: blur(1px);
  -webkit-backdrop-filter: blur(1px);
}

/* レスポンシブ対応（ガラスモーフィズム対応） */
@media (max-width: 768px) {
  .enhanced-bubble-background {
    /* モバイルでは軽量化 */
    backdrop-filter: blur(0.5px);
    -webkit-backdrop-filter: blur(0.5px);
  }
  
  .enhanced-bubble-background .pattern-layer {
    opacity: 0.2;
    animation: none;
  }
  
  .enhanced-bubble-background .gradient-layer {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}

@media (prefers-reduced-motion: reduce) {
  .enhanced-bubble-background .pattern-layer {
    /* アクセシビリティ: アニメーション無効化 */
    animation: none;
  }
}

/* 高コントラストモード対応 */
@media (prefers-contrast: high) {
  .enhanced-bubble-background {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
  
  .enhanced-bubble-background .gradient-layer {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
  
  .enhanced-bubble-background .pattern-layer {
    opacity: 0.1;
    mix-blend-mode: normal;
  }
}

/* Backdrop Filter フォールバック対応 */
@supports not (backdrop-filter: blur(1px)) {
  .enhanced-bubble-background {
    background: rgba(254, 247, 247, 0.1);
  }
  
  .enhanced-bubble-background .gradient-layer {
    opacity: 0.8;
  }
  
  .enhanced-bubble-background .pattern-layer {
    opacity: 0.2;
    mix-blend-mode: normal;
  }
}

/* 高DPI画面での最適化 */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .enhanced-bubble-background canvas {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: optimize-contrast;
  }
}
